<!DOCTYPE HTML>

<html>

<head>
    <title>Rough AJAX Test</title>
    <script>
        function loadXMLDoc()
        {
            var req = new XMLHttpRequest()
            req.onreadystatechange = function()
            {
                if (req.readyState == 4)
                {
                    if (req.status != 200)
                    {
                        //error handling code here
                    }
                    else
                    {
                        var response = JSON.parse(req.responseText)
                        document.getElementById('myDiv').innerHTML = response.username
                    }
                }
            }

            req.open('POST', '/ajax')
            req.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            var un = document.getElementById('scname').value
            var sec = document.getElementById('secret').value
            var postVars = 'username='+un+'&secret='+sec
            req.send(postVars)

            return false
        }
    </script>
</head>


<body>

    <h1>Flask AJAX Test</h1>
    <form action="" method="POST">
    <input type="text" name="scname" id="scname">
    <input type="hidden" name="secret" id="secret" value="shhh">
    <input type="button" value="Submit" onclick="return loadXMLDoc()">
    </form>

    <!-- The response gets inserted in this div. -->
    <div id="myDiv"></div>

</body>
</html>